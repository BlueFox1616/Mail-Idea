<!DOCTYPE html>
<html lang="en-US">
<head>
    <meta charset="utf-8" />
    <meta name="viewport" content="width=device-width" />
    <link href="styles/email.css" rel="stylesheet" />
    <link rel="preconnect" href="https://fonts.googleapis.com" />
    <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin />
    <meta name="google-signin-client_id" content="YOUR_GOOGLE_CLIENT_ID.apps.googleusercontent.com">
    <script src="https://apis.google.com/js/api.js" async defer onload="onGapiLoaded()"></script>

    <!-- Your custom scripts -->
    <script>
        function onGapiLoaded() {
            console.log("Google API Loaded");
            gapi.load('client:auth2', initClient);
        }

        function initClient() {
            console.log("Initializing Google API Client...");
            gapi.client.init({
                apiKey: "AIzaSyCTPsrf_vVKjFBpuvP389eJkJym2QQjqck",
                clientId: "609769740177-14dcsedrjlasnnni0m2lbu73bqt2bct8.apps.googleusercontent.com",
                discoveryDocs: ["https://www.googleapis.com/discovery/v1/apis/gmail/v1/rest"],
                scope: "https://www.googleapis.com/auth/gmail.readonly"
            }).then(() => {
                console.log("Google API Client Initialized.");
                return gapi.auth2.getAuthInstance().signIn();
            }).then(() => {
                console.log("User Signed In.");
                listMessages();
            }).catch(error => {
                console.error("Error during authentication or client init:", error);
            });
        }

        function listMessages() {
            console.log("Fetching messages...");
            gapi.client.gmail.users.messages.list({
                'userId': 'me',
                'maxResults': 10
            }).then(response => {
                console.log("Response from Gmail API:", response);
                const messages = response.result.messages;
                if (messages) {
                    messages.forEach(msg => {
                        console.log("Message ID:", msg.id);
                    });
                } else {
                    console.log("No messages found.");
                }
            }).catch(error => {
                console.error("Error fetching messages:", error);
            });
        }
    </script>
</head>
<body>
    <h1>Gmail API Test</h1>
    <p>Check the console for message IDs.</p>
</body>
</html>
